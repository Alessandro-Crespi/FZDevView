{"version":3,"sources":["../node_modules/@mui/icons-material/AddCircle.js","../node_modules/@mui/icons-material/Edit.js","pages/dashboard/account/home/sections/accademy_section.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_createSvgIcon","_jsxRuntime","_default","jsx","d","ListItem","props","content","deleteItem","editContent","editItem","className","onClick","exportInfo","md","getTitle","getPublishDate","getArgument","e","getId","AccademySection","user","windowInfo","accademy","modules","routes","navigate","useNavigate","CREATED_SECTION","SAVED_SECTION","useState","section","setSection","confirm","undefined","refute","confirmInfo","setConfirmInfo","loaderElement","useRef","observer","IntersectionObserver","handleDelete","id","stopPropagation","removeModule","CREATED_MODULES_TAG","IN_PROGRESS_MODULE_TAG","handleEdit","item","module_creation","path","state","module","useEffect","current","disconnect","canI","loadCreatedModules","loadSavedNotes","observe","getSavedNotes","getCreatedModules","console","log","placeholder","onChange","newValue","scrollButtons","centered","label","mobileMode","map","moduleId","noteId","external_routes","single_module","title","values","isLastPageLoaded","saved_notes_index","ref","action","closeFunction"],"mappings":"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","file":"static/js/5.48667773.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"\n}), 'AddCircle');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\n\nexports.default = _default;","import React, {useState, useEffect, useRef} from \"react\"\nimport SearchIcon from '@mui/icons-material/Search';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport { InputLabel } from \"@mui/material\";\nimport Select from '@mui/material/Select';\nimport {Row, Col} from \"react-bootstrap\"\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport { IconButton } from \"@material-ui/core\";\nimport { useNavigate } from \"react-router\";\nimport $ from \"jquery\"\nimport { Tab, Tabs } from \"@material-ui/core\";\nimport {default as external_routes} from \"../../../routes\"\nimport ConfirmAction from \"../../../../../components/confirm_action\";\n\nfunction AccademySection(props) {\n    let user = props.user\n    let windowInfo = props.windowInfo\n    let accademy = user.modules\n    let routes = props.routes\n    let navigate = useNavigate()\n\n    // section name\n    const CREATED_SECTION = \"created\"\n    const SAVED_SECTION = \"saved\"\n    const IN_PROPGRESS_SECTION = \"in_progress\"\n\n    const [section, setSection] = useState(SAVED_SECTION)\n    const [firstLoad, setFirstLoad] = useState(true)\n    const [confirmInfo, setConfirmInfo] = useState({confirm: undefined, refute: undefined})\n\n    const loaderElement = useRef()\n    const observer = useRef(new IntersectionObserver(() => {}))\n\n    // delete and edit management\n    function handleDelete(e, id) {\n        e.stopPropagation()\n        setConfirmInfo({\n            confirm: () => {\n                if(section == CREATED_SECTION) accademy.removeModule(id, accademy.CREATED_MODULES_TAG)\n                else if(section == SAVED_SECTION) accademy.removeModule(id, accademy.SAVED_SECTION)\n                else if(section == IN_PROPGRESS_SECTION) accademy.removeModule(id, accademy.IN_PROGRESS_MODULE_TAG)\n            },\n            refute: undefined\n        })\n    }\n\n    function handleEdit(item) {\n        navigate(routes.module_creation.path, { state : { module : item.id }})\n    }\n\n    // opens create module page\n    function createNewModule() {\n        navigate(routes.module_creation.path, { state : { module : undefined } })\n    }\n\n    function openNote(moduleId, noteId) {\n        navigate(external_routes.single_module.path + moduleId + \"/\" + noteId)\n    }\n    // used to load modules automatically on scroll\n    async function manageInfiniteScroll(e) {\n        let list = e.target\n        let listScrollHeight = list.clientHeight\n        let listOffsetTop = $('#modules_container').offset().top\n        let lastElementOffsetTop = $('#modules_container .list_item').last().offset().top\n\n        if(lastElementOffsetTop < listOffsetTop + listScrollHeight) {\n            await accademy.loadCreatedModules() // TODO: change in base of section name\n        }\n    }\n\n    useEffect(() => {\n        observer.current.disconnect()\n\n        if(loaderElement.current != undefined) {\n            observer.current = new IntersectionObserver((e) => {\n                let info = e[0]\n                if(info['isIntersecting']) {\n                    if(section == CREATED_SECTION && user && user.canI(\"create_academy\")) accademy.loadCreatedModules()\n                    else if(section == SAVED_SECTION) accademy.loadSavedNotes()\n                }\n            })\n\n            observer.current.observe(loaderElement.current)\n        }\n    }, [section, accademy.getSavedNotes(), accademy.getCreatedModules()])\n    \n\n\n    useEffect(() => {   \n        console.log(accademy.getSavedNotes())\n    }, [accademy.getSavedNotes()])\n\n    return <div id=\"accademy_section\">\n        <div className=\"space_between\">\n            <h2>Accademy</h2>\n            {\n                user && user.canI(\"create_academy\") ?\n                    <div className=\"centered\">\n                        <AddCircleIcon className=\"orange_icon\" onClick={createNewModule}/>\n                    </div> :\n                    \"\"\n            }\n        </div>\n        <Col md=\"6\" className=\"mx-auto\">\n            <div className=\"search_bar mt-4\">\n                <input placeholder=\"Cerca...\"/>\n            </div>\n        </Col>\n        <Tabs value={section} onChange={(e, newValue) => setSection(newValue)} scrollButtons=\"auto\" centered>\n            <Tab label=\"Salvate\" value={SAVED_SECTION}/>\n            { user && user.canI(\"create_academy\") ? <Tab label=\"Create\" value={CREATED_SECTION} /> : \"\" }\n            \n        </Tabs>\n\n        <div className=\"items_container\">\n            {\n                !windowInfo.mobileMode ?\n                    <div className=\"header\">\n                        <Row>\n                            <Col md=\"3\">\n                                <h6>Titolo</h6>\n                            </Col>\n                            <Col md=\"3\"></Col>\n                            <Col md=\"3\"></Col>\n                            <Col md=\"3\">\n                                <h6>Modifica</h6>\n                            </Col>\n                        </Row>\n                    </div> :\n                    \"\"\n            }\n            <hr/>\n            <div className=\"list\" id=\"modules_container\">\n                {\n                    section == SAVED_SECTION ?\n                        accademy && accademy.getSavedNotes().map((item) => (\n                            <div className=\"bounce\" onClick={() => openNote(item['module_id'], item['id'])}>\n                                <p>{item.title}</p>\n                                <hr/>\n                            </div>\n                        ))\n                    : section == CREATED_SECTION ?\n                        accademy && Object.values(accademy.getCreatedModules()).map((item) => <ListItem content={item} deleteItem={handleDelete} editItem={handleEdit}/>)\n                    : \"\"\n                }\n                {\n                    section == CREATED_SECTION && accademy.isLastPageLoaded() ?\n                    \"\" : \n                    section == SAVED_SECTION && accademy.saved_notes_index == null ?\n                    \"\" :\n                    <div ref={loaderElement} className=\"loading m-auto\"></div>\n                }\n            </div>\n        </div>\n        <ConfirmAction action={confirmInfo} closeFunction={() => setConfirmInfo({confirm: undefined, refute: undefined})}/>\n    </div>\n}\n\nfunction ListItem(props) {\n    let content = props.content\n    let deleteItem = props.deleteItem\n    let editContent = props.editItem\n\n    return <div className=\"list_item bounce\" onClick={() => editContent(content.exportInfo())}>\n        <Row>\n            <Col md=\"3\">\n                <p className=\"title\">{content && content.getTitle()}</p>\n            </Col>\n            <Col md=\"3\">\n                <p className=\"date\">{content && content.getPublishDate()}</p>\n            </Col>\n            <Col md=\"3\">\n                <p className=\"category\">{content && content.getArgument()}</p>\n            </Col>\n            <Col md=\"3\">\n                <div className=\"display_inline\">\n                    <DeleteIcon\n                    onClick={(e) => deleteItem(e, content.getId())} \n                    className=\"orange_icon m-1\" />\n                    <EditIcon className=\"orange_icon m-1\" />\n                </div>\n            </Col>\n        </Row>\n        <hr/>\n    </div>\n}\n\nexport default AccademySection"],"sourceRoot":""}