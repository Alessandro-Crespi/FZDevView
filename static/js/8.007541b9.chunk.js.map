{"version":3,"sources":["../node_modules/@mui/icons-material/AddCircle.js","../node_modules/@mui/icons-material/Edit.js","pages/dashboard/account/home/sections/news_section.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_createSvgIcon","_jsxRuntime","_default","jsx","d","ListItem","props","content","deleteItem","handleDelete","editItem","handleEdit","section","tag","createdTag","savedTag","className","onClick","e","exportInfo","md","getTitle","getPublishDate","getId","NewsSection","windowInfo","user","news","routes","navigate","useNavigate","CREATED_SECTION","SAVED_SECTION","useState","setSection","confirm","undefined","refute","confirmInfo","setConfirmInfo","loaderElement","useRef","observer","IntersectionObserver","item","news_creation","path","state","external_routes","single_news","id","stopPropagation","removeNews","CREATED_NEWS_TAG","SAVED_NEWS_TAG","useEffect","current","disconnect","canI","loadCreatedNews","loadSavedNews","observe","getSavedNews","getCreatedNews","placeholder","onChange","newValue","scrollButtons","centered","label","mobileMode","values","map","created_news_index","saved_news_index","ref","action","closeFunction"],"mappings":"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","file":"static/js/8.007541b9.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"\n}), 'AddCircle');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\n\nexports.default = _default;","import React, {useState, useEffect, useRef} from \"react\"\nimport { Navigate, useNavigate } from \"react-router\";\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport { InputLabel } from \"@mui/material\";\nimport Select from '@mui/material/Select';\nimport {Row, Col} from \"react-bootstrap\"\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport $ from \"jquery\"\nimport { Tab, Tabs } from \"@material-ui/core\";\nimport ConfirmAction from \"../../../../../components/confirm_action\";\nimport { default as external_routes } from \"../../../routes\"\n\nfunction NewsSection(props) {\n    let windowInfo = props.windowInfo\n    let user = props.user\n    let news = user.news\n    let routes = props.routes\n    let navigate = useNavigate()\n    \n    // section name\n    const CREATED_SECTION = \"created\"\n    const SAVED_SECTION = \"saved\"\n\n    const [section, setSection] = useState(SAVED_SECTION)\n    const [firstLoad, setFirstLoad] = useState(true)\n    const [confirmInfo, setConfirmInfo] = useState({confirm: undefined, refute: undefined})\n\n    const loaderElement = useRef()\n    const observer = useRef(new IntersectionObserver(() => {}))\n    \n    // handle edit and delete\n    function handleEdit(e, item) {\n        if(section == CREATED_SECTION) navigate(routes.news_creation.path, { state : {news : item}})\n        else if(section == SAVED_SECTION) navigate(external_routes.single_news.path + item.id)\n    }\n\n    function handleDelete(e, id) {\n        e.stopPropagation()\n        setConfirmInfo({\n            confirm: () => {\n                if(section == CREATED_SECTION) news.removeNews(id, news.CREATED_NEWS_TAG)\n                else if(section == SAVED_SECTION) news.removeNews(id, news.SAVED_NEWS_TAG)\n            },\n            refute: undefined\n        })\n    }\n\n    // opens create news page\n    function createNewNews() {\n        navigate(routes.news_creation.path, { state : { news : undefined } })\n    }\n\n    // used to load modules automatically on scroll\n    async function manageInfiniteScroll(e) {\n        let list = e.target\n        let listScrollHeight = list.clientHeight\n        let listOffsetTop = $('#new_continer').offset().top\n        let lastElementOffsetTop = $('#new_continer .list_item').last().offset().top\n\n        if(lastElementOffsetTop < listOffsetTop + listScrollHeight) {\n            await news.loadCreatedNews() // TODO: change in base of section name\n        }\n    }\n\n    useEffect(() => {\n        observer.current.disconnect()\n\n        if(loaderElement.current != undefined) {\n            observer.current = new IntersectionObserver((e) => {\n                let info = e[0]\n                if(info['isIntersecting']) {\n                    if(section == CREATED_SECTION && user && user.canI(\"create_news\")) news.loadCreatedNews()\n                    else if(section == SAVED_SECTION) news.loadSavedNews()\n                }\n            })\n    \n            observer.current.observe(loaderElement.current)\n        }\n    }, [section, news.getSavedNews(), news.getCreatedNews()])\n\n    return <div id=\"news_section\">\n        <div className=\"space_between\">\n            <h2>News</h2>\n            {\n                user && user.canI(\"create_news\") ?\n                    <div className=\"centered\">\n                        <AddCircleIcon className=\"orange_icon\" onClick={createNewNews}/>\n                    </div> :\n                    \"\"\n            }\n        </div>\n        <br/>\n\n        <Col md=\"6\" className=\"mx-auto\">\n            <div className=\"search_bar\">\n                <input className=\"my_input\" placeholder=\"Cerca...\"/>\n            </div>\n        </Col>\n        <Tabs value={section} onChange={(e, newValue) => setSection(newValue)} scrollButtons=\"auto\" centered>\n            <Tab label=\"Salvate\" value={SAVED_SECTION}/>\n            { user && user.canI(\"create_news\") ? <Tab label=\"Create\" value={CREATED_SECTION} /> : \"\"}\n        </Tabs>\n        \n        <div className=\"items_container\" id=\"new_continer\">\n            {\n                !windowInfo.mobileMode ? \n                    <div className=\"header\">\n                        {\n                            section == SAVED_SECTION ?\n                            <Col md=\"12\">\n                                <h6>Titolo</h6>\n                            </Col> : \n                            <Row>\n                                <Col md=\"4\">\n                                    <h6>Titolo</h6>\n                                </Col>\n                                <Col md=\"4\">\n                                    <h6>Data</h6>\n                                </Col>\n                                <Col md=\"4\">\n                                    <h6>Modifica</h6>\n                                </Col>\n                            </Row>\n                        }\n                    </div> :\n                    \"\"\n            }\n            <hr/>\n            <div className=\"list\" >\n                {\n                    section == SAVED_SECTION ?\n                    news && Object.values(news.getSavedNews()).map((item) => <ListItem section={section} tag={{createdTag: CREATED_SECTION, savedTag: SAVED_SECTION}} content={item} handleDelete={handleDelete} handleEdit={handleEdit}/>)\n                    : section == CREATED_SECTION ?\n                    news && Object.values(news.getCreatedNews()).map((item) => <ListItem section={section}content={item} tag={{createdTag: CREATED_SECTION, savedTag: SAVED_SECTION}} handleDelete={handleDelete} handleEdit={handleEdit}/>)\n                    : \"\"\n                }\n                {\n                    section == CREATED_SECTION && news.created_news_index == null ?\n                    \"\" :\n                    section == SAVED_SECTION && news.saved_news_index == null ?\n                    \"\" :\n                    <div className=\"centered\">\n                        <div ref={loaderElement} className=\"loading\"></div>\n                    </div>\n                }\n            </div>\n        </div>\n        <ConfirmAction action={confirmInfo} closeFunction={() => setConfirmInfo({confirm: undefined, refute: undefined})} />\n    </div>\n}\n\nfunction ListItem(props) {\n    let content = props.content\n    let deleteItem = props.handleDelete\n    let editItem = props.handleEdit\n    let section = props.section\n    let {createdTag, savedTag} = props.tag\n\n    return <div className=\"list_item bounce\" onClick={(e) => editItem(e, content.exportInfo())}>\n        {\n            section == createdTag ?\n                <Row>\n                    <Col md=\"4\">\n                        <p className=\"title\">{content && content.getTitle()}</p>\n                    </Col>\n                    <Col md=\"4\">\n                        <p className=\"date\">{content && content.getPublishDate()}</p>\n                    </Col>\n                    {/* <Col md=\"3\">\n                        <p className=\"category\">{content && content.getCategory()}</p>\n                    </Col> */}\n                    <Col md=\"4\">\n                        <div className=\"display_inline text-right\">\n                            <DeleteIcon\n                            onClick={(e) => deleteItem(e, content.getId())} \n                            className=\"orange_icon m-1\" />\n                            <EditIcon className=\"orange_icon m-1\" />\n                        </div>\n                    </Col>\n                </Row> :\n            section == savedTag ? \n                <p className=\"title\">{content && content.getTitle()}</p> : \n                \"\"\n        }\n        <hr/>\n    </div>\n}\n\nexport default NewsSection"],"sourceRoot":""}