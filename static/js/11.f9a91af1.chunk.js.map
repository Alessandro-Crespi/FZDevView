{"version":3,"sources":["../node_modules/@mui/icons-material/AddCircle.js","controllers/school_list_controller.js","pages/dashboard/account/home/sections/school_section.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_createSvgIcon","_jsxRuntime","_default","jsx","d","SchoolListController","this","quiz","list","state","undefined","overrideState","newIntstance","assign","auto_save","updateInfo","newQuiz","QuestionCreationController","question","setTitle","setOverrideState","bind","push","a","error","getId","$","ajax","type","url","api_url","accepts","contentType","beforeSend","beforeSendCallback","Error","quizIndex","indexOf","splice","school","schoolIndex","info","success","data","newSchool","SchoolController","setId","setName","setCode","setQuizNumber","length","setImage","answer","addChoice","title","description","addSelectedChoice","quizType","getQuiz","publish","SchoolSection","props","SCHOOL_LIST_TAG","QUIZ_LIST_TAG","navigate","useNavigate","useState","currentSection","setCurrentSection","schoolList","setSchoolList","searchValue","setSearchValue","popupContent","setPopupContent","confirm","refute","confirmInfo","setConfirmInfo","user","message","then","catch","console","warn","useEffect","setState","canI","loadList","loadQuiz","routes","account_home","path","id","className","onClick","school_creation","Tabs","onChange","e","scrollButtons","Tab","label","Row","Col","md","getList","map","exportInfo","editSchool","getName","getCode","schoolId","stopPropagation","deleteSchool","placeholder","target","getTitle","includes","Accordion","AccordionSummary","expandIcon","style","width","deleteQuiz","AccordionDetails","publishQuiz","addQuiz","removePopup","action","closeFunction"],"mappings":"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","file":"static/js/11.f9a91af1.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"\n}), 'AddCircle');\n\nexports.default = _default;","import SchoolController from \"./school_controller\"\r\nimport QuestionCreationController from \"./question_creation_controller\"\r\nimport $ from \"jquery\"\r\nimport { api_url } from \"../App\"\r\nimport { beforeSendCallback } from '../utils'\r\n\r\nclass SchoolListController {\r\n  constructor() {\r\n    this.quiz = []      // list of quiz\r\n    this.list =Â []      // list of Schools\r\n    this.state = undefined\r\n    this.overrideState = undefined\r\n  }\r\n\r\n  setState(state) {\r\n    this.state = state\r\n  }\r\n\r\n  setOverrideState(overrideState) {\r\n    this.overrideState = overrideState\r\n  }\r\n\r\n  updateInfo() {\r\n    if(this.state != undefined) {\r\n      let newIntstance = new SchoolListController()\r\n      Object.assign(newIntstance, this)\r\n      this.state(newIntstance)\r\n    }\r\n    else if(this.overrideState != undefined) this.overrideState()\r\n  }\r\n\r\n  // getter\r\n  getList() { return this.list }\r\n  getQuiz() { return this.quiz }\r\n\r\n  // setter\r\n  setList(list, auto_save = true) {\r\n    this.list = list\r\n    if(auto_save) this.updateInfo()\r\n  }\r\n\r\n  setQuiz(quiz, auto_save = true) {\r\n    this.quiz = quiz\r\n    if(auto_save) this.updateInfo()\r\n  }\r\n\r\n  addQuiz() {\r\n    let newQuiz = new QuestionCreationController()\r\n    newQuiz.question.setTitle(\"Nuovo quiz\")\r\n    newQuiz.setOverrideState((() => this.updateInfo()).bind(this))\r\n    this.quiz.push(newQuiz)\r\n    this.updateInfo()\r\n  }\r\n\r\n  async deleteQuiz(quiz) {\r\n    //let accessToken = window.localStorage.getItem('accessToken')\r\n    let error = false\r\n\r\n    // TODO: cancellare quiz non pubblicato\r\n    if(quiz.question.getId() != \"\") {\r\n      await $.ajax({\r\n        type: \"DELETE\",\r\n        url: api_url + \"school/quiz/\" + quiz.question.getId(),\r\n        accepts: \"application/json\",\r\n        contentType: \"application/json\",\r\n        beforeSend: beforeSendCallback,\r\n        error: () => error = true\r\n      })\r\n    }\r\n\r\n    if(error) throw Error(\"Errore nell'eliminazione\")\r\n    else {\r\n      let quizIndex = this.quiz.indexOf(quiz)\r\n      this.quiz.splice(quizIndex, 1)\r\n      this.updateInfo()\r\n    }\r\n  }\r\n\r\n  async deleteSchool(school) {\r\n    //let accessToken = window.localStorage.getItem('accessToken')\r\n    let error = false\r\n\r\n    await $.ajax({\r\n      type: \"DELETE\",\r\n      url: api_url + \"school/\" + school.getId(),\r\n      accepts: \"application/json\",\r\n      contentType: \"application/json\",\r\n      beforeSend: beforeSendCallback,\r\n      error: () => error = true\r\n    })\r\n\r\n\r\n    if(error) throw Error(\"Errore nell'eliminazione\")\r\n    else {\r\n      let schoolIndex = this.list.indexOf(school)\r\n      this.list.splice(schoolIndex, 1)\r\n      this.updateInfo()\r\n    }\r\n  }\r\n\r\n  // API\r\n  async loadList() {\r\n    //let accessToken = window.localStorage.getItem('accessToken')\r\n    let info = {}\r\n    let error = false \r\n\r\n    await $.ajax({\r\n      type: \"GET\",\r\n      url: api_url + \"schools\",\r\n      accepts: \"application/json\",\r\n      contentType: \"application/json\",\r\n      beforeSend: beforeSendCallback,\r\n      success: (data) => info = data['schools'],\r\n      error: () => error = true\r\n    })\r\n\r\n    for(let school of info) {\r\n      let newSchool = new SchoolController()\r\n      newSchool.setId(school['slug'])\r\n      newSchool.setName(school['schoolName'])\r\n      newSchool.setCode(school['code'])\r\n      newSchool.setQuizNumber(school['quizNumber'])\r\n      this.list.push(newSchool)\r\n    }\r\n\r\n    this.updateInfo()\r\n    return { error: error, info: info }\r\n  }\r\n\r\n  async loadQuiz(forceLoad = false) {\r\n    //let accessToken = window.localStorage.getItem('accessToken')\r\n    let info = {}\r\n    let error = false\r\n\r\n    if(this.quiz.length == 0) {\r\n      await $.ajax({\r\n        type: \"GET\",\r\n        url: api_url + \"school/quiz\",\r\n        accepts: \"application/json\",\r\n        contentType: \"application/json\",\r\n        beforeSend: beforeSendCallback,\r\n        success: (data) => info = data['quiz'],\r\n        error: () => error = true\r\n      })\r\n\r\n      for(let quiz of info) {\r\n        let newQuiz = new QuestionCreationController()\r\n        newQuiz.setOverrideState((() => this.updateInfo()).bind(this))\r\n        newQuiz.question.setId(quiz['slug'])\r\n        newQuiz.question.setTitle(quiz['question'])\r\n        newQuiz.question.setImage(quiz['coverImageLink'])\r\n\r\n        for(let answer of quiz['answers']) {\r\n          newQuiz.question.addChoice({\r\n            title: answer['answer'],\r\n            description: answer['description']\r\n          }, answer['slug'])\r\n          if(answer['isCorrect']) newQuiz.question.addSelectedChoice(answer['slug'])\r\n        }\r\n\r\n\r\n        this.quiz.push(newQuiz)\r\n        this.updateInfo()\r\n      }\r\n    }\r\n\r\n    return { error: error, info: info }\r\n  }\r\n\r\n  async publishQuiz() {\r\n    // posting quiz \r\n    let quizType = \"school\"\r\n    for(let quiz of this.getQuiz()) {\r\n      let quizSlug = await quiz.publish(quizType)\r\n    }\r\n  }\r\n}\r\n\r\nexport default SchoolListController","import React, {useState, useEffect} from 'react'\r\nimport SchoolListController from '../../../../../controllers/school_list_controller'\r\nimport {Row, Col} from \"react-bootstrap\"\r\nimport ArrowCircleRightIcon from '@mui/icons-material/ArrowCircleRight'\r\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport routes from '../../routes';\r\nimport Accordion from '@mui/material/Accordion';\r\nimport AccordionSummary from '@mui/material/AccordionSummary';\r\nimport AccordionDetails from '@mui/material/AccordionDetails';\r\nimport QuestionCreator from '../../../../../components/question_creator';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { useNavigate } from \"react-router\";\r\nimport Popup from '../../../../../components/popup';\r\nimport ConfirmAction from '../../../../../components/confirm_action';\r\n\r\nfunction SchoolSection(props) {\r\n  // sections tag\r\n  const SCHOOL_LIST_TAG = \"list\"\r\n  const QUIZ_LIST_TAG = \"quiz\"\r\n  \r\n  let navigate = useNavigate()\r\n  const [currentSection, setCurrentSection] = useState(SCHOOL_LIST_TAG)\r\n  const [schoolList, setSchoolList] = useState(new SchoolListController())\r\n  const [searchValue, setSearchValue] = useState(\"\")\r\n  const [popupContent, setPopupContent] = useState({})\r\n  const [confirmInfo, setConfirmInfo] = useState({confirm: undefined, refute: undefined})\r\n\r\n  let user = props.user\r\n\r\n  // redirect to school creation page\r\n  function createSchool() {\r\n    navigate(routes.school_creation.path, { state : { school :undefined }})\r\n  }\r\n\r\n  // redirect to school creation page\r\n  function editSchool(school) {\r\n    navigate(routes.school_creation.path, { state : { school : school.exportInfo() }})\r\n  }\r\n\r\n  // delete quiz from quiz list\r\n  function deleteQuiz(e, quiz) {\r\n    e.stopPropagation()\r\n    setConfirmInfo({\r\n      confirm: () => schoolList.deleteQuiz(quiz),\r\n      refute: undefined\r\n    })\r\n  }\r\n\r\n  // delete school from school list\r\n  function deleteSchool(e, schoolId) {\r\n    e.stopPropagation()\r\n    setConfirmInfo({\r\n      confirm: () => schoolList.deleteSchool(schoolId),\r\n      refute: undefined\r\n    })\r\n  }\r\n\r\n  async function publishQuiz(quiz) {\r\n    setPopupContent({ error: false, message: \"Pubblicazione in corso...\"})\r\n    quiz.publish(\"school\")\r\n    .then(() => setPopupContent({ error: false, message: \"Pubblicazione completata\"}))\r\n    .catch((message) => {\r\n      setPopupContent({ error: true, message: \"Errore\"})\r\n      console.warn(message)\r\n    })\r\n  }\r\n\r\n  // setting up schoolList and getting from server\r\n  useEffect(() => {\r\n    schoolList.setState(setSchoolList)\r\n    if(user && user.canI(\"create_school\")) schoolList.loadList()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if(currentSection == QUIZ_LIST_TAG) {\r\n      if(user && user.canI(\"create_school\")) schoolList.loadQuiz()\r\n    }\r\n  }, [currentSection])\r\n\r\n  useEffect(() => {\r\n    if(user) {\r\n      if(!user.canI(\"create_school\")) navigate(routes.account_home.path)\r\n    }\r\n  }, [user])\r\n  \r\n  \r\n  \r\n  return (\r\n    <div id=\"school_section\">\r\n      <div className=\"space_between\">\r\n        <h2>Scuola</h2>\r\n        {\r\n          currentSection == SCHOOL_LIST_TAG && user && user.canI(\"create_school\") ? \r\n          <div className=\"centered\">\r\n            <AddCircleIcon className=\"orange_icon\" onClick={() => createSchool()}/>\r\n          </div>\r\n          : \"\"\r\n        }\r\n      </div>\r\n      <Tabs value={currentSection} onChange={(e, value) => setCurrentSection(value)} scrollButtons=\"auto\" >\r\n        <Tab label=\"Scuole\" value={SCHOOL_LIST_TAG} />\r\n        <Tab label=\"Quiz\" value={QUIZ_LIST_TAG} />\r\n      </Tabs>\r\n      <br/>\r\n      {\r\n        currentSection == SCHOOL_LIST_TAG ? \r\n          <>\r\n            <Row>\r\n              <Col md=\"6\">\r\n                <h5>Nome</h5>\r\n              </Col>\r\n              <Col md=\"3\">\r\n                <h5>Codice</h5>\r\n              </Col>\r\n            </Row>\r\n            <div className=\"list_container m-2\">\r\n              {\r\n                schoolList.getList().map(school => (\r\n                  <>\r\n                    <Row className=\"bounce\" onClick={() => editSchool(school)}>\r\n                      <Col md=\"6\">\r\n                        <p className=\"m-0\">{school.getName()}</p>\r\n                      </Col>\r\n                      <Col md=\"4\">\r\n                        <p className=\"m-0\">{school.getCode()}</p>\r\n                      </Col>\r\n                      <Col md=\"2\">\r\n                        <DeleteIcon className=\"orange_icon\" onClick={(e) => deleteSchool(e, school)}/>\r\n                        <ArrowCircleRightIcon className=\"orange_icon m-0\"/>\r\n                      </Col>\r\n                    </Row>\r\n                    <hr/>\r\n                  </>\r\n                ))\r\n              }\r\n            </div>\r\n          </> : \r\n          <>\r\n            <div className=\"block\">\r\n              <Row>\r\n                <Col md=\"8\">\r\n                  <h5>Quiz</h5>\r\n                </Col>\r\n                <Col md=\"4\">\r\n                  <input className=\"input\" placeholder=\"Cerca...\" value={searchValue} onChange={(e) => setSearchValue(e.target.value)}/>\r\n                </Col>\r\n              </Row>\r\n              <br/>\r\n              {\r\n                schoolList.getQuiz().map(quiz => (\r\n                  quiz.question.getTitle().includes(searchValue) ?\r\n                    <Accordion className=\"accordion\">\r\n                      <AccordionSummary expandIcon={<ExpandMoreIcon className=\"orange_icon\"/>}>\r\n                        <div className=\"space_between\" style={{ width: \"100%\"}}>\r\n                          <h6 className=\"m-2\">{quiz.question.getTitle()}</h6>\r\n                          <div className=\"centered\">\r\n                            <DeleteIcon className=\"orange_icon\" onClick={(e) => deleteQuiz(e, quiz)}/>\r\n                          </div>\r\n                        </div>\r\n                      </AccordionSummary>\r\n                      <AccordionDetails>\r\n                        <QuestionCreator question={quiz}/>\r\n                        <div className=\"centered\">\r\n                        <button className=\"button\" onClick={() => publishQuiz(quiz)}>Salva</button>\r\n                        </div>\r\n                      </AccordionDetails>\r\n                      <br/>\r\n                      <hr/>\r\n                      <br/>\r\n                    </Accordion>\r\n                    : \"\"\r\n                ))\r\n              }\r\n              <div className=\"centered\">\r\n                <button className=\"button\" onClick={() => schoolList.addQuiz()}>Aggiungi domanda</button>\r\n              </div> \r\n            </div>\r\n          </>\r\n      }\r\n      {\r\n        popupContent['error'] != undefined ?\r\n          <Popup\r\n            error={popupContent['error']}\r\n            message={popupContent['message']}\r\n            removePopup={() => setPopupContent({})}\r\n            />\r\n          : \"\"\r\n      }\r\n      <ConfirmAction action={confirmInfo} closeFunction={() => setConfirmInfo({confirm: undefined, refute: undefined})} />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SchoolSection"],"sourceRoot":""}